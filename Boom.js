!function(e,t){function o(){d.isOpenLog&&console.log.apply(console,arguments)}function i(e){var t=0;for(u=[];9>t;t++)u[t]=e*t;o("arrRandomOffset is "+u)}function a(e){l=e.attr("src")||"";var t=e[0],o=t.getBoundingClientRect(),i={width:t.width,height:t.height,top:o.top,left:o.left},a=$.extend(s,i),r=$(document.createElement("div"));return r.css(a),$("body").append(r),r}function r(e){var t=e.width(),i=e.height(),a=10,r=0,n=0,s=0,h=0,p=0,u=[];if(o(t+","+i),!(10>=t&&10>=i)){var f=t>i?i:t;for(o("base point is :"+f),f==t?(s=Math.floor(t/a),n=Math.floor(i/s),r=a):(s=Math.floor(i/a),n=Math.floor(t/s),r=a),o("widthNum:"+r+",height:"+n+",width:"+s),i>t&&(r*=n,n=r/n,r/=n),o("widthNum:"+r+",heightNum:"+n+",newElemWidth:"+s);r>h;h++){for(;n>p;p++){var m=Math.random()*d.scaleLevel,y=Math.random()*d.blurLevel,c=document.createElement("div"),x=h*s,v=p*s,b={"background-image":"url("+l+")","background-repeat":"no-repeat","background-position":"-"+v+"px -"+x+"px",position:"absolute",width:s,height:s,"border-radius":"100%",top:0,left:0,top:x,left:v,transform:"scale("+m+")","-webkit-filter":"blur("+y+"px)","-moz-filter":"blur("+y+"px)","-ms-filter":"blur("+y+"px)",filter:"blur("+y+"px)"};o("cssTop is:"+x+",cssLeft is:"+v+",posiElemCss:"+b),$(c).css(b),u.push(c)}p=0}o(u),e.append(u)}}function n(e,t){var i=0,a=5*Math.random(),r=a*(e.x>e.y?e.x:e.y),n={x:0,y:0};e.y-t.y>0?1:0;if(e.x!=t.x&&e.y!=t.y){i=(e.y-t.y)/(e.x-t.x);var s=e.y-i*e.x,l=Math.random(),h=Math.random();return o("斜率slope is:"+i+",b is:"+s+",distance is:"+r),n.y=2*t.y-e.y+(l>.5?4*l:4*-l),n.x=(n.y-s)/i+(h>.5?4*h:4*-h),n}return e.x==t.x?e.y>t.y?{x:e.x,y:e.y-r}:{x:e.x,y:e.y+r}:e.y==t.y?e.x>t.x?{x:e.x-r,y:e.y}:{x:e.x+r,y:e.y}:void 0}var s={position:"absolute",width:0,height:0,left:0,top:0},l="",h=function(e,t){return new h.prototype.init(e,t)},p=0,d={scaleLevel:3,blurLevel:3,boomLevel:4,boomTime:800,isOpenLog:!1},u=[1,-4,8,-12,16,-20,24,-28,32];h.prototype={init:function(e,a){arguments.length;return arguments[0]!==t&&this.boom(e),d=$.extend(d,a),o("argOptions is "),o(d),4!=d.boomLevel&&i(d.boomLevel),this},boom:function(e){var t=e.length;if(t){elem=e.eq(p++).css({opacity:"1"}),p==t&&(p=0);var i=2*Math.random(),s={x:Math.floor(elem.width()/2)+i,y:Math.floor(elem.height()/2)-i},l=a(elem);elem.delay(200,"shake").queue("shake",function(e){$(this).animate({opacity:0},{duration:1}).removeClass("shake"),e()}).dequeue("shake").addClass("shake").queue("shake",function(){r(l);for(var e=l.find("div"),t=e.length,i=0;t>i;i++){var a=e.eq(i),h={x:parseInt(a.css("left")),y:parseInt(a.css("top"))},p=n(s,h);o(p);var f=u[i%9];e.eq(i).animate({left:p.x+(Math.random()>.5?f:-f),top:p.y+(Math.random()>.5?f:-f),opacity:0},d.boomTime)}})}}},h.prototype.init.prototype=h.prototype,e.boom=h}(window);